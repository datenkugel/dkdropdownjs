<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dropdown Kit Framework - Complete Demo</title>
    <!-- Include the framework files -->
    <link rel="stylesheet" href="dk_dropdown.css">
    
    <!-- Demo page styles (not part of framework) -->
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f5f7;
        }
        .demo-section {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        }
        .demo-section h2 {
            margin-top: 0;
            color: #1d1d1f;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .demo-section h3 {
            color: #333;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1d1d1f;
        }
        .result {
            padding: 15px;
            background: #f0f8ff;
            border-radius: 8px;
            margin-top: 15px;
        }
        .code-example {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #007bff;
        }
        .code-example code {
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
            font-size: 14px;
            display: block;
            white-space: pre-wrap;
        }
        .feature-badge {
            display: inline-block;
            background: #007bff;
            color: white;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 10px;
        }
        .toc {
            background: #e9ecef;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .toc h3 {
            margin-top: 0;
        }
        .toc ul {
            margin: 0;
            padding-left: 20px;
        }
        .toc li {
            margin: 5px 0;
        }
        .toc a {
            text-decoration: none;
            color: #007bff;
        }
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>üéØ Dropdown Kit Framework - Complete Demo</h1>
    <p>A modern, customizable dropdown solution with zero conflicts - comprehensive usage examples!</p>

    <!-- Table of Contents -->
    <div class="toc">
        <h3>üìã Demo Sections</h3>
        <ul>
            <li><a href="#basic-usage">Basic Usage Examples</a></li>
            <li><a href="#select-enhancement">HTML Select Enhancement</a></li>
            <li><a href="#advanced-features">Advanced Features</a></li>
            <li><a href="#real-world">Real-World Examples</a></li>
        </ul>
    </div>

    <!-- SECTION 1: BASIC USAGE EXAMPLES -->
    <div class="demo-section" id="basic-usage">
        <h2>üöÄ Basic Usage Examples</h2>

        <h3>Minimal Setup <span class="feature-badge">Zero Config</span></h3>
        <p>Just an empty div! Framework handles the rest.</p>
        <div class="code-example">
            <code>&lt;div id="simple"&gt;&lt;/div&gt;

const simple = new CustomDropdown('simple', {
    options: [
        { value: "1", text: "Option 1" },
        { value: "2", text: "Option 2" }
    ]
});</code>
        </div>
        <div class="form-group">
            <label for="simple">Simple Dropdown:</label>
            <div id="simple"></div>
        </div>
        <div class="result" id="simple-result">No selection</div>

        <h3>Fully Customized <span class="feature-badge">Full Control</span></h3>
        <p>Complete customization with groups, icons, and custom text.</p>
        <div class="code-example">
            <code>const custom = new CustomDropdown('custom', {
    groups: [{
        label: "üé® Colors",
        options: [
            { value: "red", text: "Red" },
            { value: "blue", text: "Blue", selected: true },
            { value: "green", text: "Green" },
            { value: "purple", text: "Purple", disabled: true }
        ]
    }]
}, {
    placeholder: 'üé® Pick your favorite color...',
    arrowIcon: 'üîΩ'
});</code>
        </div>
        <div class="form-group">
            <label for="custom">Custom Dropdown:</label>
            <div id="custom"></div>
        </div>
        <div class="result" id="custom-result">No selection</div>
    </div>

    <!-- SECTION 2: HTML SELECT ENHANCEMENT -->
    <div class="demo-section" id="select-enhancement">
        <h2>üîÑ HTML Select Enhancement</h2>
        <p>Transform regular HTML select elements into modern dropdowns - just like Bootstrap!</p>

        <h3>Basic Select Enhancement <span class="feature-badge">Drop-in Replacement</span></h3>
        <p>Convert a regular select element with pre-selected options:</p>
        
        <div class="code-example">
            <code>&lt;select id="basic-select"&gt;
    &lt;option value=""&gt;Choose a country...&lt;/option&gt;
    &lt;option value="us" selected&gt;United States&lt;/option&gt;
    &lt;option value="ca"&gt;Canada&lt;/option&gt;
&lt;/select&gt;

const basicDropdown = new CustomDropdown('basic-select');</code>
        </div>
        
        <div class="form-group">
            <label for="basic-select">Country:</label>
            <select id="basic-select" name="country">
                <option value="">Choose a country...</option>
                <option value="us" selected>United States</option>
                <option value="ca">Canada</option>
                <option value="uk">United Kingdom</option>
                <option value="fr">France</option>
                <option value="de">Germany</option>
                <option value="jp">Japan</option>
                <option value="au">Australia</option>
            </select>
        </div>
        <div class="result" id="basic-select-result">No selection</div>

        <h3>Grouped Select Options <span class="feature-badge">Auto OptGroups</span></h3>
        <p>Handles optgroups automatically:</p>
        
        <div class="form-group">
            <label for="grouped-select">Product Category:</label>
            <select id="grouped-select" name="category">
                <option value="">Select a product...</option>
                <optgroup label="Electronics">
                    <option value="laptop">Laptop</option>
                    <option value="phone">Smartphone</option>
                    <option value="tablet">Tablet</option>
                </optgroup>
                <optgroup label="Clothing">
                    <option value="shirt">T-Shirt</option>
                    <option value="jeans">Jeans</option>
                    <option value="shoes">Shoes</option>
                </optgroup>
                <optgroup label="Books">
                    <option value="fiction">Fiction</option>
                    <option value="non-fiction">Non-Fiction</option>
                    <option value="textbook" disabled>Textbook (Out of Stock)</option>
                </optgroup>
            </select>
        </div>
        <div class="result" id="grouped-select-result">No selection</div>

        <h3>Auto-Initialization <span class="feature-badge">Bootstrap Style</span></h3>
        <p>Auto-initialize all selects with data-dropdown attribute:</p>
        
        <div class="code-example">
            <code>// Auto-initialize all select elements with data-dropdown attribute
CustomDropdown.initializeSelects('select[data-dropdown]');</code>
        </div>
        
        <div class="form-group">
            <label for="auto-select1">Auto Dropdown 1:</label>
            <select id="auto-select1" name="auto1" data-dropdown>
                <option value="">Choose option...</option>
                <option value="option1">Option 1</option>
                <option value="option2">Option 2</option>
                <option value="option3">Option 3</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="auto-select2">Auto Dropdown 2:</label>
            <select id="auto-select2" name="auto2" data-dropdown>
                <option value="">Select item...</option>
                <option value="item1">Item A</option>
                <option value="item2">Item B</option>
                <option value="item3">Item C</option>
            </select>
        </div>
        
        <div class="result" id="auto-result">No selections</div>
    </div>

    <!-- SECTION 3: ADVANCED FEATURES -->
    <div class="demo-section" id="advanced-features">
        <h2>‚ö° Advanced Features</h2>

        <h3>API-Powered Dropdown <span class="feature-badge">Dynamic Loading</span></h3>
        <p>Load data from APIs with loading states and error handling:</p>
        <div class="code-example">
            <code>const api = new CustomDropdown('api', null, {
    placeholder: 'Click to load users from API...',
    loadingText: '‚è≥ Fetching users...',
    errorText: '‚ùå Failed to load users'
});

// Load data on first click
api.loadUsersFromAPI = async function() {
    // Fetch from JSONPlaceholder API
    const users = await fetch('https://jsonplaceholder.typicode.com/users');
    // Transform and populate dropdown
};</code>
        </div>
        <div class="form-group">
            <label for="api">API Dropdown:</label>
            <div id="api"></div>
        </div>
        <div class="result" id="api-result">No selection</div>

        <h3>DataUrl API <span class="feature-badge">Automatic Loading</span></h3>
        <p>Use the built-in dataUrl for automatic API integration with data transformation:</p>
        <div class="code-example">
            <code>const dataUrlDropdown = new CustomDropdown('dataurl', null, {
    placeholder: 'Select a post...',
    dataUrl: 'https://jsonplaceholder.typicode.com/posts?_limit=10',
    dataResolver: (data) => {
        return {
            groups: [{
                label: "üìù Recent Posts",
                options: data.map(post => ({
                    value: post.id.toString(),
                    text: `${post.title.substring(0, 50)}...`,
                    disabled: post.id % 3 === 0
                }))
            }]
        };
    }
});</code>
        </div>
        <div class="form-group">
            <label for="dataurl">DataUrl Dropdown:</label>
            <div id="dataurl"></div>
        </div>
        <div class="result" id="dataurl-result">No selection</div>

        <h3>Custom Styled Select <span class="feature-badge">Custom Options</span></h3>
        <p>Apply custom styling and behavior to select elements:</p>
        
        <div class="form-group">
            <label for="custom-select">Priority Level:</label>
            <select id="custom-select" name="priority" data-placeholder="Set priority level...">
                <option value="low">Low Priority</option>
                <option value="medium">Medium Priority</option>
                <option value="high">High Priority</option>
                <option value="urgent">Urgent</option>
            </select>
        </div>
        <div class="result" id="custom-select-result">No selection</div>
    </div>

    <!-- SECTION 4: REAL-WORLD EXAMPLES -->
    <div class="demo-section" id="real-world">
        <h2>üåç Real-World Examples</h2>

        <h3>Large Dataset - Document Categories <span class="feature-badge">85 Options</span></h3>
        <p>A comprehensive dropdown with 85 options across 12 categories, including disabled options and search functionality.</p>
        <div class="code-example">
            <code>const categories = new CustomDropdown('categories', {
    groups: [
        {
            label: "Administrative Documents",
            options: [
                { value: "2", text: "Reports" },
                { value: "3", text: "Minutes" },
                // ... 85 total options across 12 categories
            ]
        }
        // ... more groups
    ]
}, {
    placeholder: 'Select a document category...',
    searchPlaceholder: 'Search categories...'
});</code>
        </div>
        <div class="form-group">
            <label for="categories">Document Category Selection:</label>
            <div id="categories"></div>
        </div>
        <div class="result" id="categories-result">No selection</div>
    </div>

    <!-- Include the framework JavaScript -->
    <script src="dk_dropdown.js"></script>
    <script>
        // ============================================================================
        // BASIC USAGE EXAMPLES
        // ============================================================================

        // 1. MINIMAL SETUP - Just works!
        const simple = new CustomDropdown('simple', {
            options: [
                { value: "1", text: "Option 1" },
                { value: "2", text: "Option 2" },
                { value: "3", text: "Option 3" },
                { value: "4", text: "Option 4" },
                { value: "5", text: "Option 5" },
            ]
        });

        simple.onChange = (value, text) => {
            document.getElementById('simple-result').textContent = `Selected: ${text} (${value})`;
        };

        // 2. FULL CUSTOMIZATION
        const custom = new CustomDropdown('custom', {
            groups: [{
                label: "üé® Colors",
                options: [
                    { value: "red", text: "Red" },
                    { value: "blue", text: "Blue", selected: true },
                    { value: "green", text: "Green" },
                    { value: "purple", text: "Purple", disabled: true }
                ]
            }]
        }, {
            placeholder: 'üé® Pick your favorite color...',
            searchPlaceholder: 'üîç Search colors...',
            name: 'color_preference',
            arrowIcon: 'üîΩ',
            noResultsText: 'üö´ No colors found',
            disabledSuffix: '(coming soon!)'
        });

        custom.onChange = (value, text) => {
            document.getElementById('custom-result').textContent = `Selected: ${text} (${value})`;
        };

        // ============================================================================
        // HTML SELECT ENHANCEMENT
        // ============================================================================

        // 1. Basic select enhancement
        const basicDropdown = new CustomDropdown('basic-select');
        basicDropdown.onChange = function(value, text) {
            document.getElementById('basic-select-result').textContent = 
                `Selected: ${text} (${value})`;
        };

        // 2. Grouped select enhancement
        const groupedDropdown = new CustomDropdown('grouped-select');
        groupedDropdown.onChange = function(value, text) {
            document.getElementById('grouped-select-result').textContent = 
                `Selected: ${text} (${value})`;
        };

        // 3. Bootstrap-style auto-initialization
        const autoDropdowns = CustomDropdown.initializeSelects('select[data-dropdown]');
        
        // Add change listeners to auto-initialized dropdowns
        autoDropdowns.forEach((dropdown, index) => {
            dropdown.onChange = function(value, text) {
                const results = [];
                autoDropdowns.forEach((dd, i) => {
                    const val = dd.getValue();
                    const txt = dd.getText();
                    if (val) {
                        results.push(`Dropdown ${i + 1}: ${txt} (${val})`);
                    }
                });
                
                document.getElementById('auto-result').textContent = 
                    results.length > 0 ? results.join('; ') : 'No selections';
            };
        });

        // ============================================================================
        // ADVANCED FEATURES
        // ============================================================================

        // 1. API-POWERED (with loading states)
        const api = new CustomDropdown('api', null, {
            placeholder: 'Click to load users from API...',
            name: 'user_id',
            loadingText: '‚è≥ Fetching users...',
            errorText: '‚ùå Failed to load users',
            disabledSuffix: '(busy)'
        });

        // Add custom method to load and transform API data
        api.loadUsersFromAPI = async function() {
            this.setLoadingState(true);
            try {
                const response = await fetch('https://jsonplaceholder.typicode.com/users');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const users = await response.json();
                
                // Transform API response to dropdown format
                this.data = {
                    groups: [{
                        label: "üë• Available Users",
                        options: users.slice(0, 6).map(user => ({
                            value: user.id.toString(),
                            text: `${user.name} (${user.email})`,
                            disabled: user.id > 3 // Some users are "busy"
                        }))
                    }]
                };
                
                this.setLoadingState(false);
                this.populateOptions();
                this.setInitialSelection();
                return true; // Success
                
            } catch (error) {
                console.error('API Error:', error);
                this.setErrorState();
                return false; // Error
            }
        };

        // Override click handler to load data on first click
        let apiDataLoaded = false;
        const originalToggle = api.toggle;
        api.toggle = function() {
            if (!apiDataLoaded && !this.isLoading) {
                apiDataLoaded = true;
                this.loadUsersFromAPI().then(() => {
                    // Open dropdown after data is loaded
                    originalToggle.call(this);
                });
                return;
            }
            originalToggle.call(this);
        };

        api.onChange = (value, text) => {
            document.getElementById('api-result').textContent = `Selected: ${text} (ID: ${value})`;
        };

        // 2. DATAURL - Built-in API integration with automatic loading
        const dataUrlDropdown = new CustomDropdown('dataurl', null, {
            placeholder: 'Select a post...',
            loadingText: 'üì° Loading posts...',
            errorText: '‚ùå Failed to load posts',
            name: 'post_id',
            dataUrl: 'https://jsonplaceholder.typicode.com/posts?_limit=10',
            dataResolver: (data) => {
                return {
                    groups: [{
                        label: "üìù Recent Posts",
                        options: data.map(post => ({
                            value: post.id.toString(),
                            text: `${post.title.substring(0, 50)}${post.title.length > 50 ? '...' : ''}`,
                            disabled: post.id % 3 === 0 // Every 3rd post disabled for demo
                        }))
                    }]
                };
            }
        });

        dataUrlDropdown.onChange = (value, text) => {
            document.getElementById('dataurl-result').textContent = `Selected: ${text} (Post ID: ${value})`;
        };

        // 3. Custom options for select
        const customDropdown = new CustomDropdown('custom-select', null, {
            arrowIcon: 'üîΩ',
            enableSearch: false, // Disable search for this one
            noResultsText: 'No priorities found'
        });
        customDropdown.onChange = function(value, text) {
            document.getElementById('custom-select-result').textContent = 
                `Selected: ${text} (${value})`;
        };

        // ============================================================================
        // REAL-WORLD EXAMPLES
        // ============================================================================

        // Large dataset from original demo
        const categories = new CustomDropdown('categories', {
            groups: [
                {
                    label: "Miscellaneous",
                    options: [
                        { value: "1", text: "Miscellaneous", selected: true }
                    ]
                },
                {
                    label: "Administrative Documents",
                    options: [
                        { value: "2", text: "Reports" },
                        { value: "3", text: "Minutes" },
                        { value: "4", text: "Financial Reports" },
                        { value: "5", text: "Contracts (Customer Contracts, Supplier Contracts, Lease Agreements)" },
                        { value: "6", text: "Powers of Attorney" },
                        { value: "7", text: "Permits and Licenses" }
                    ]
                },
                {
                    label: "Personnel Records",
                    options: [
                        { value: "8", text: "Employment Contracts" },
                        { value: "9", text: "Payroll Records" },
                        { value: "10", text: "Vacation Requests" },
                        { value: "11", text: "Employee Evaluations" },
                        { value: "12", text: "Application Documents" },
                        { value: "13", text: "Training and Education" },
                        { value: "14", text: "Certificates" },
                        { value: "15", text: "Work References" },
                        { value: "16", text: "Work Schedules" }
                    ]
                },
                {
                    label: "Financial and Accounting Documents",
                    options: [
                        { value: "17", text: "Invoices" },
                        { value: "18", text: "E-Invoices (XRechnung CII)", disabled: true },
                        { value: "19", text: "E-Invoices (XRechnung UBL)", disabled: true },
                        { value: "20", text: "E-Invoices (ZUGFeRD / Factur-X)", disabled: true },
                        { value: "21", text: "Receipts" },
                        { value: "22", text: "Delivery Notes" },
                        { value: "23", text: "Payment Reminders" },
                        { value: "24", text: "Tax Documents" },
                        { value: "25", text: "Balance Sheets" },
                        { value: "26", text: "Profit and Loss Statements" },
                        { value: "27", text: "Credit Agreements" },
                        { value: "28", text: "Cash Books" }
                    ]
                },
                {
                    label: "Legal Documents",
                    options: [
                        { value: "29", text: "Articles of Association" },
                        { value: "30", text: "Partnership Agreements" },
                        { value: "31", text: "Commercial Register Excerpts" },
                        { value: "32", text: "Insurance Policies" },
                        { value: "33", text: "Compliance Documents" },
                        { value: "34", text: "Patents and Trademarks" },
                        { value: "35", text: "Arbitration Awards" },
                        { value: "36", text: "Court Judgments" },
                        { value: "37", text: "Settlement Agreements" },
                        { value: "38", text: "Legal Opinions" }
                    ]
                },
                {
                    label: "Correspondence",
                    options: [
                        { value: "39", text: "E-Mails" },
                        { value: "40", text: "Business Correspondence" },
                        { value: "41", text: "Press Releases" },
                        { value: "42", text: "Newsletters" },
                        { value: "43", text: "Annual General Meeting Minutes" },
                        { value: "44", text: "Notes" },
                        { value: "45", text: "Letters or Faxes" }
                    ]
                },
                {
                    label: "Technical Documents",
                    options: [
                        { value: "46", text: "Manuals" },
                        { value: "47", text: "Operating Instructions" },
                        { value: "48", text: "Technical Specifications" },
                        { value: "49", text: "Maintenance Protocols" },
                        { value: "50", text: "Construction Drawings" },
                        { value: "51", text: "Training Videos" },
                        { value: "52", text: "Product Demonstrations" }
                    ]
                },
                {
                    label: "Quality and Process Documents",
                    options: [
                        { value: "53", text: "Quality Guidelines" },
                        { value: "54", text: "Process Descriptions" },
                        { value: "55", text: "Work Instructions" },
                        { value: "56", text: "Audit Reports" },
                        { value: "57", text: "Company Policies" },
                        { value: "58", text: "Organizational Charts" }
                    ]
                },
                {
                    label: "Project Management",
                    options: [
                        { value: "59", text: "Project Plans" },
                        { value: "60", text: "Timelines" },
                        { value: "61", text: "Status Reports" },
                        { value: "62", text: "Requirements Specifications" },
                        { value: "63", text: "Budget Plans" },
                        { value: "64", text: "Presentation Materials" },
                        { value: "65", text: "Risk Assessments" },
                        { value: "66", text: "Project Completion Reports" }
                    ]
                },
                {
                    label: "Marketing and Sales",
                    options: [
                        { value: "67", text: "Marketing Strategies" },
                        { value: "68", text: "Advertising Materials" },
                        { value: "69", text: "Sales Reports" },
                        { value: "70", text: "Presentations" },
                        { value: "71", text: "Commercials" },
                        { value: "72", text: "Product Videos" },
                        { value: "73", text: "Customer Testimonials" },
                        { value: "74", text: "Social Media Content Plans" }
                    ]
                },
                {
                    label: "IT Documents",
                    options: [
                        { value: "75", text: "System Documentation" },
                        { value: "76", text: "Software Architecture Documentation" },
                        { value: "77", text: "Network Plans" },
                        { value: "78", text: "Security Guidelines" },
                        { value: "79", text: "Backup and Recovery Plans" },
                        { value: "80", text: "Incident Reports" }
                    ]
                },
                {
                    label: "Environmental and Safety Documents",
                    options: [
                        { value: "81", text: "Environmental Reports" },
                        { value: "82", text: "Safety Reports" },
                        { value: "83", text: "Emergency Plans" },
                        { value: "84", text: "Health and Safety Guidelines" },
                        { value: "85", text: "Risk Assessments" }
                    ]
                }
            ]
        }, {
            placeholder: 'Select a document category...',
            searchPlaceholder: 'Search categories...',
            name: 'document_category',
            noResultsText: 'No categories found',
            disabledSuffix: '(not available)'
        });

        categories.onChange = (value, text) => {
            document.getElementById('categories-result').innerHTML = 
                `<strong>Selected:</strong> ${text}<br><strong>Value:</strong> ${value}`;
        };

        // ============================================================================
        // INITIALIZATION AND LOGGING
        // ============================================================================

        // Demo: Form submission handling
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéâ All dropdowns initialized!');
            
            // Show that the original select elements are properly updated
            const originalSelects = document.querySelectorAll('select');
            originalSelects.forEach(select => {
                select.addEventListener('change', function() {
                    console.log(`Original select "${this.name}" changed to: ${this.value}`);
                });
            });
        });

        // Show framework benefits
        console.log('üéØ Dropdown Kit Framework Benefits:');
        console.log('‚úÖ Zero CSS conflicts (dk_ prefix)');
        console.log('‚úÖ Minimal HTML required');
        console.log('‚úÖ API integration built-in');
        console.log('‚úÖ Full keyboard navigation');
        console.log('‚úÖ Mobile responsive');
        console.log('‚úÖ Form integration ready');
        console.log('‚úÖ Bootstrap-style select enhancement');
        console.log('‚úÖ Auto-initialization support');
    </script>
</body>
</html>